<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui">
<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Graph</title>
<link rel="stylesheet" type="text/css" href="css/graphStyle.css"></link>
</h:head>
<body>
<script src="http://d3js.org/d3.v4.min.js"></script>
<script src="http://techanjs.org/techan.min.js"></script>
<script src="graph.js"></script>
<script src="liveData.js"></script>
<script>
window.onload = function(){
	document.getElementsByClassName("showButton")[0].click();
}

function clickButton(){
	document.getElementById("form").submit();
/* 	console.log(document.getElementsByClassName("showButton")[0].click()); */
}
</script>

<h1>Chart</h1>
	<h:form id = "form">
		<p:inputText value="#{graphBean.ticker}" id="ticker" a:placeholder="Ticker Symbol" /><br></br>
		
		<h:selectOneRadio value="#{graphBean.frequency}" onclick="clickButton()" onload="clickButton()">
			<f:selectItem itemLabel="1 Day"  itemValue="TIME_SERIES_INTRADAY" />
			<f:selectItem itemLabel="1 Month" itemValue="TIME_SERIES_DAILY" />
			<f:selectItem itemLabel="1 Year" itemValue="TIME_SERIES_WEEKLY" />
			<f:selectItem itemLabel="Max" itemValue="TIME_SERIES_MONTHLY" />
		</h:selectOneRadio>	

  		<input id="Apply" type="submit" value="Apply" style="display: none;" ></input>
	</h:form>
	
	<h:form>
 		<h:commandButton styleClass="button showButton" type="button" value="Show"  
 		onclick="createGraph('#{graphBean.getData()}'); liveData('fb')" style="display: none;" />
 		<br></br>
 		<label>Current price: <script>document.write(liveData('fb'))</script></label>
	</h:form>
	<!-- <h:form><h:commandButton value="LiveData" action="live"/></h:form> -->
</body>
</html>