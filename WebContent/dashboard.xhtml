<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Dashboard</title>
<link rel="stylesheet" type="text/css"
	href="resources/css/dashboard.css"></link>
</head>
<body>

	<div class="top">
		<div id="taskbarHeading">MThree Trading Platform</div>
		<div id="userTaskbarContainer">
			<div id="userTaskbarContent">
				#{personaliseBean.fullName}
				<h:form>
					<h:commandButton value="Settings" action="settings.xhtml" class="taskbarButtons"/>
					<h:commandButton value="Logout" action="#{logoutBean.doLogout}" class="taskbarButtons"/>
				</h:form>
			</div>
		</div>
	</div>
	<div class="container">
		<div class="left">
			<div class="portfolioHeader">
				<h1>Portfolio</h1>
				
				<div id="balanceContainer">
				<p>Balance: #{personaliseBean.balance}</p>
				
					<h:form>
						<p><h:inputText value="#{depositBean.amount}" id="deposit" /></p>
						<p><h:commandButton value="Deposit" action="#{depositBean.doDeposit}" class="depositButton" /></p>
					</h:form>
				</div>
			</div>


			<table>
				<tr id="header">
					<th>Name</th>
					<th>Ticker</th>
					<th>Type</th>
					<th>Quantity</th>
					<th>Price Per(GBP)</th>
					<th>Total</th>
				</tr>
				<c:forEach items="${portfolioBean.orders}" var="order">
					<tr>
						<td>${order.instrument.name}</td>
						<td>${order.instrument.ticker}</td>
						<td>${order.type}</td>
						<td>${order.quantity}</td>
						<td>${order.price}</td>
						<td>${order.getTotalCost()}</td>
					</tr>
				</c:forEach>
			</table>
		</div>
		<div class="right">
			<h1>Market</h1>
			<h:form>
				<!-- <table>
					<tr id="header">
						<th>Instrument Name</th>
						<th>Instrument Ticker</th>
						<th>Price Per(GBP)</th>
						<th>Quantity</th>
						<th>Direction</th>
						<th>Submit</th>
					</tr>
					<c:forEach items="${marketDataBean.marketData}" var="instrument">
						<tr>
							<td>${instrument.name}</td>
							<td>${instrument.ticker}</td>
							<td>${instrument.price}</td>
							<td><h:inputText value="#{orderBean.quantity}" id="quantity" /></td>
							<td><h:selectOneMenu value="#{orderBean.type}">
								<f:selectItem itemValue="BUY" itemlabel="Buy" />
								<f:selectItem itemValue="SELL" itemlabel="Sell" />
								</h:selectOneMenu></td>
							<td><h:commandButton id="orderSubmit" action="${orderBean.doOrder(#{instrument.name}, #{instrument.ticker}, #{instrument.price})}"	label="Submit" style="width:100%; background-color: #807291; border: 2px solid #807291; "/></td>
						</tr>
					</c:forEach>
					
					<h:
				</table> -->
				
				<h:dataTable value="#{marketDataBean.marketData}" var="instrument">
					<h:column>
						<f:facet name="header">Instrument Name</f:facet>
						#{instrument.name}
					</h:column>
					<h:column>
						<f:facet name="header">Instrument Ticker</f:facet>
						#{instrument.ticker}
					</h:column>
					<h:column>
						<f:facet name="header">Price Per (GBP)</f:facet>
						#{instrument.price}
					</h:column>
					<h:column>
						<f:facet name="header">Quantity</f:facet>
						<h:inputText value="#{orderBean.quantity}" id="quantity" />
					</h:column>
					<h:column>
						<f:facet name="header">Direction</f:facet>
						<h:selectOneMenu value="#{orderBean.type}">
							<f:selectItem itemValue="BUY" itemlabel="Buy" />
							<f:selectItem itemValue="SELL" itemlabel="Sell" />
						</h:selectOneMenu>
					</h:column>
					<h:column>
						<f:facet name="header">Submit</f:facet>
						<h:commandButton id="orderSubmit" action="${orderBean.doOrder(instrument)}"	label="Submit"></h:commandButton>
					</h:column>
				</h:dataTable>
			</h:form>
			<h:form>
				<h:commandButton value="safe" action="safe" />
			</h:form>
		</div>
	</div>
</body>
</html>
